#!/usr/bin/env bash


##
# Normalizes running terminals with a specific command.
#
# Usage: termoil -- echo hi
##
function termoil() {
	local term="i3-sensible-terminal"

	local spec=":t:"
	while getopts $spec opt; do
		case "$opt" in
			t) term="$OPTARG" ;;
			:) error "Option '-$OPTARG' requires an argument" ;;
			*) error "Invalid option: -$OPTARG" ;;
		esac
	done
	shift $((OPTIND - 1))

	if [[ "$*" ]]; then
		if [ "$term" == "kitty "]; then
			$term -- $(echo "$@")
		else
			$term -e "$(echo "$@")"
		fi
	else
		$term
	fi
}

termoil "$@"
