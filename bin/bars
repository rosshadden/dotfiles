#!/usr/bin/env nu

def main [] {
	let monitors = hyprctl monitors -j | from json | sort-by id

	eww close-all

	eww open background
	eww open eos

	$monitors | each {|monitor|
		notify-send $"monitor ($monitor.id)" $"($monitor.name): ($monitor.width)x($monitor.height)\n($monitor.make): ($monitor.model)"
		eww open bar --id $"bar:($monitor.name)" --arg $"monitor=($monitor | to json)"
		eww open info --id $"info:($monitor.name)" --arg $"monitor=($monitor | to json)"
		eww open --id $"info:($monitor.name)" --screen ($monitor | get id) debug
	}
}
