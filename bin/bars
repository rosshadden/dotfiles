#!/usr/bin/env nu

def main [] {
	let monitors = hyprctl monitors -j | from json | sort-by id

	eww close-all

	$monitors | each {|monitor|
		eww open top --id $"top:($monitor.name)" --screen $monitor.name --arg $"monitor=($monitor | to json -r)"
		eww open bottom --id $"bottom:($monitor.name)" --screen $monitor.name --arg $"monitor=($monitor | to json -r)"
		$monitor
	}

	dinitctl start eos
	dinitctl start hyprmon
	dinitctl start hyprmon-zoom
}
