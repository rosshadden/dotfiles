#!/usr/bin/env nu

def main [] {
	hyprctl activewindow -j | jq -rc

	socat -u $"UNIX:/tmp/hypr/($env.HYPRLAND_INSTANCE_SIGNATURE)/.socket2.sock" - | lines -s | each {|line|
		let event = $line | parse "{type}>>{data}" | first

		if type not-in [workspace createworkspace destroyworkspace] { continue }

		hyprctl activewindow -j | jq -rc
	}
}
